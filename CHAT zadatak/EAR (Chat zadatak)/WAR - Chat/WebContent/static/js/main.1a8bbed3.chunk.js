(this["webpackJsonpchat-app-front"]=this["webpackJsonpchat-app-front"]||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/ikonica.b00bb764.png"},17:function(e,t,a){},40:function(e,t,a){e.exports=a(84)},45:function(e,t,a){},46:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(18),r=a.n(l),o=(a(45),a(46),a(14)),c=a(7),i=a(8),u=a(9),m=a(10),d=a(1),g=a.n(d),h=a(13),p=a.n(h),E=a(12),f=a(11),v=a(2),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(o.a)({},e.target.name,e.target.value))},n.register=function(e){e.preventDefault(),console.log("REGISTERED"),""===n.state.username||""===n.state.password||""===n.state.confPassword?v.NotificationManager.warning("Fields cannot be empty!","",3e3):n.state.password==n.state.confPassword?g.a.post("http://localhost:8080/WAR_-_Chat/rest/users/register",{username:n.state.username,password:n.state.password}).then((function(e){console.log(e),v.NotificationManager.success("Please log in now.","Successfully registered!",3e3),n.props.history.push({pathname:"/"})})).catch((function(){return v.NotificationManager.warning("User with given username already exists.","",3e3)})):v.NotificationManager.warning("Passwords doesn't match.","",3e3)},n.state={username:"",password:"",confPassword:"",toUsers:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo",width:"126",height:"126"}),s.a.createElement("br",null),s.a.createElement("form",{onSubmit:this.register},s.a.createElement("table",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"first-col"},s.a.createElement("label",null,"Username: * ")),s.a.createElement("td",null,s.a.createElement("input",{className:"input-text",name:"username",onChange:this.handleChange,value:this.state.username,type:"text"}))),s.a.createElement("tr",null,s.a.createElement("td",{className:"first-col"},s.a.createElement("label",null,"Password: * ")),s.a.createElement("td",null,s.a.createElement("input",{className:"input-text",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"}))),s.a.createElement("tr",null,s.a.createElement("td",{className:"first-col"},s.a.createElement("label",null,"Confirm Password: * ")),s.a.createElement("td",null,s.a.createElement("input",{className:"input-text",name:"confPassword",onChange:this.handleChange,value:this.state.confPassword,type:"password"})))),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"register-btn"},"Register")),s.a.createElement("br",null),s.a.createElement("small",null,"Already have an account? ",s.a.createElement(E.b,{to:"/"},"Log In!")))}}]),a}(s.a.Component),N=Object(f.g)(b),w=a(39),S=(a(17),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e;return e="LOGGED_IN"==this.props.isLoggedIn?this.props.active?s.a.createElement("div",{className:"activeCircle"}):s.a.createElement("div",{className:"inactiveCircle"}):this.props.active?s.a.createElement("div",{className:"redActiveCircle"}):s.a.createElement("div",{className:"redInactiveCircle"}),s.a.createElement("div",{className:"row user"},s.a.createElement("div",{className:"col-9"},s.a.createElement("button",{onClick:this.props.onClickk},this.props.name,"  ",e)))}}]),a}(s.a.Component)),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({content:e.target.value})},n.sendMessage=function(e){e.preventDefault(),console.log("POSLATO: "+n.props.userName),console.log(n.state.subject),console.log(n.state.content),g.a.post(n.state.BASE_URL+"/messages/"+n.props.userId,{subject:n.state.subject,content:n.state.content,senderId:n.props.loggedUserId,receiverId:n.props.userId}).then((function(e){console.log(e),n.setState({content:""}),n.getAllMessages()})).catch((function(e){return console.log(e)}))},n.getAllMessages=function(){g.a.get(n.state.BASE_URL+"/messages/"+n.props.loggedUserId).then((function(e){console.log(e),n.setState({messages:e.data})})).catch((function(e){}))},n._handleKeyDown=function(e){"Enter"===e.key&&n.sendMessage(e)},n.state={BASE_URL:"http://localhost:8080/WAR_-_Chat/rest",subject:"From: ",content:"",messages:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getAllMessages()}},{key:"render",value:function(){var e=this,t=this.props.userId,a=this.state.messages.filter((function(e){return e.senderId==t||e.receiverId==t}));return s.a.createElement("div",{className:"chatBox"},s.a.createElement("div",{className:"row "},s.a.createElement("div",{className:"col-5 name-header"},s.a.createElement("h4",null,this.props.userName)),s.a.createElement("div",{className:"col-6"}),s.a.createElement("div",{className:"col-1"},s.a.createElement("button",{onClick:this.props.closeBox,className:"close"},"X"))),s.a.createElement("hr",null),s.a.createElement("div",{className:"messages"},a.reverse().map((function(a){return a.receiverId==t?s.a.createElement("div",{key:a.id,className:"row message-right"},s.a.createElement("small",null,e.props.loggedUser," | 00:00"),s.a.createElement("p",null,a.content)):s.a.createElement("div",{key:a.id,className:"row message-left"},s.a.createElement("small",null,e.props.userName," | 00:00"),s.a.createElement("p",null,a.content))}))),s.a.createElement("hr",null),s.a.createElement("div",{className:"row inputDiv"},s.a.createElement("input",{type:"text",name:"msgContent",onKeyDown:this._handleKeyDown,value:this.state.content,onChange:this.handleChange,className:"typeField"}),s.a.createElement("button",{onClick:this.sendMessage,className:"btnSend"},"Send")))}}]),a}(s.a.Component),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({msgContent:e.target.value})},n._handleKeyDown=function(e){"Enter"===e.key&&n.sendToAll(e)},n.sendToAll=function(e){e.preventDefault(),console.log("SVI"),console.log(n.state.msgContent),g.a.post(n.state.BASE_URL+"/messages/all",{subject:"Subject (All)",content:n.state.msgContent,senderId:n.props.location.state.loggedUser.id,receiverId:1}).then((function(e){console.log(e),n.setState({msgContent:""}),n.getAllMessages(),n.closeAllBoxes(),v.NotificationManager.success("Successfully sent!","",3e3)})).catch((function(){return v.NotificationManager.error("Something went wrong. Please try again later.","",3e3)}))},n.closeAllBoxes=function(){for(var e=0;e<n.state.users.length;e++)n.state.users[e].active=!1,n.forceUpdate(),n.setState({boxes:[]})},n.getAllMessages=function(){g.a.get(n.state.BASE_URL+"/messages/"+n.state.loggedUserId).then((function(e){console.log(e),n.setState({messages:e.data})})).catch((function(e){}))},n.getLoggedUsers=function(){console.log("LOGGED USERS"),g.a.get(n.state.BASE_URL+"/users/loggedIn").then((function(e){console.log(e),n.setState({loggedInUsers:e.data})})).catch((function(e){}))},n.getRegisteredUsers=function(){console.log("REGISTERED USERS"),g.a.get(n.state.BASE_URL+"/users/registered").then((function(e){console.log(e),n.setState({users:e.data})})).catch((function(e){}))},n.changeActiveState=function(e){for(var t=0;t<n.state.users.length;t++)n.state.users[t].id==e&&(n.state.users[t].active=!n.state.users[t].active,n.forceUpdate())},n.closeBox=function(e){n.setState({boxes:n.state.boxes.filter((function(t){return t.id!=e}))}),n.changeActiveState(e)},n.showChatBox=function(e,t){if(n.state.boxes.some((function(e){return e.id===t})))n.closeBox(t);else{var a={id:t,username:e,messages:[]};g.a.get(n.state.BASE_URL+"/messages/"+t).then((function(e){console.log(e),a.messages=e.data,n.setState({boxes:[].concat(Object(w.a)(n.state.boxes),[a])}),n.changeActiveState(t)})).catch((function(e){}))}},n.logOut=function(e){e.preventDefault(),g.a.delete(n.state.BASE_URL+"/users/"+n.props.location.state.loggedUser.id).then((function(e){console.log(e)})).catch((function(e){})),n.props.history.push("/")},n.state={BASE_URL:"http://localhost:8080/WAR_-_Chat/rest",boxes:[],users:[{id:1,name:"Prvi Prvic",active:!1},{id:2,name:"Drugi Drugic",active:!1},{id:3,name:"Treci Trecic",active:!1}],loggedInUsers:[],registeredUsers:[],msgContent:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){void 0!=this.props.location.state&&(this.getLoggedUsers(),this.getRegisteredUsers(),this.setState({loggedInUserId:this.props.location.state.id}))}},{key:"render",value:function(){var e=this;if(void 0!=this.props.location.state){var t=this.props.location.state.loggedUser.id,a=this.props.location.state.loggedUser.username,n=this.state.users.filter((function(e){return e.id!==t}));console.log(t)}return void 0!=this.props.location.state?s.a.createElement("div",{className:"Users"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-md-6 col-lg-4 .col-xl-4"},s.a.createElement("div",{className:"user-list"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4 col-sm-4 col-md-12 .col-xl-5 col-lg-5"},s.a.createElement("div",{className:"avatar"})),s.a.createElement("div",{className:"col-8 col-sm-8 .col-xl-7 col-lg-7 col-md-12 welcome"},s.a.createElement("h3",null,"Hi, ",a))),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("br",null),s.a.createElement("h4",null,"Say hi to someone!"),s.a.createElement("br",null),s.a.createElement("div",{className:"userss"},n.map((function(t){return s.a.createElement(S,{isLoggedIn:t.loggedIn,onClickk:function(){return e.showChatBox(t.username,t.id)},name:t.username,active:t.active,key:t.id,id:t.id})}))),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("label",null,"Send message to all logged users:"),s.a.createElement("div",null,s.a.createElement("input",{type:"text",className:"typeField",onKeyDown:this._handleKeyDown,value:this.state.msgContent,name:"msgContent",onChange:this.handleChange}),s.a.createElement("button",{onClick:this.sendToAll,className:"btnSendAll"},"Send")),s.a.createElement("hr",null),s.a.createElement("button",{onClick:this.logOut,className:"btnSendAll"},"Log out"))),s.a.createElement("div",{className:"col-12 col-md-6 col-lg-8 .col-xl-8"},s.a.createElement("div",{className:"home-page"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-9"},s.a.createElement("h1",null,"Welcome!")),s.a.createElement("div",{className:"col-3"},s.a.createElement("img",{alt:"logo",src:p.a,height:"70",width:"70"}))),this.state.boxes.reverse().map((function(n){return s.a.createElement(C,{loggedUser:a,loggedUserId:t,key:n.id,userName:n.username,userId:n.id,messages:n.messages,closeBox:function(){return e.closeBox(n.id)}})})))))):s.a.createElement(f.a,{to:"/"})}}]),a}(s.a.Component),U=Object(f.g)(y),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).login=function(e){e.preventDefault(),""===n.state.username||""===n.state.password?v.NotificationManager.warning("Username and password cannot be empty!","",3e3):(console.log("LOGGED IN"),g.a.post("http://localhost:8080/WAR_-_Chat/rest/users/login",{username:n.state.username,password:n.state.password}).then((function(e){n.setState({loggedInUser:e.data,loggedStatus:!0}),v.NotificationManager.success("Welcome back!","",3e3),n.props.history.push({pathname:"/users",state:{loggedUser:{username:e.data.username,id:e.data.id,status:n.state.loggedStatus}}})})).catch((function(e){return v.NotificationManager.error("There is no registered users with given username and password.","",3e3)})))},n.handleChange=function(e){n.setState(Object(o.a)({},e.target.name,e.target.value))},n.state={username:"",password:"",toUsers:!1,loggedInUser:{username:"",password:"",id:0},loggedStatus:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo",width:"256",height:"256"}),s.a.createElement("br",null),s.a.createElement("p",null,"Welcome to Chatout app!"),s.a.createElement("form",{onSubmit:this.login},s.a.createElement("table",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("label",null,"Username: "),s.a.createElement("td",null),s.a.createElement("input",{className:"input-text",onChange:this.handleChange,value:this.state.username,name:"username",type:"text"}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("label",null,"Password: "),s.a.createElement("td",null),s.a.createElement("input",{className:"input-text",onChange:this.handleChange,value:this.state.password,name:"password",type:"password"})))),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"register-btn"},"Login")),s.a.createElement("br",null),s.a.createElement("small",null,"Doesn't have an account? ",s.a.createElement(E.b,{to:"/register"},"Register!")))}}]),a}(s.a.Component),x=Object(f.g)(A);a(83);var I=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(E.a,null,s.a.createElement(f.d,null,s.a.createElement(f.b,{exact:!0,path:"/"},s.a.createElement(x,null)),s.a.createElement(f.b,{path:"/register"},s.a.createElement(N,null)),s.a.createElement(f.b,{path:"/users"},s.a.createElement(U,null))),s.a.createElement(v.NotificationContainer,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.1a8bbed3.chunk.js.map